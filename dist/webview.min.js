!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports.ChromeAppManager=t():e.ChromeAppManager=t()}(this,function(){return function(e){function t(n){if(s[n])return s[n].exports;var r=s[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var s={};return t.m=e,t.c=s,t.p="",t(0)}([function(e,t,s){"use strict";var n=s(1);n.enable("*");var r=n("webview"),o=s(4),i=new o,a=!1;t.start=function(){return a?r("already started listening"):(r("start listening"),a=!0,void window.addEventListener("message",function(e){var t=e.data;if(r("message received",t),i.ready){if("admin.connect"===t.type)return r("receive connect after connect");if(!t.messageID)return r("received a message without a messageID");o.handleMessage(t)}else{if("admin.connect"!==t.type)return r("received a message before connection");r("connecting as window "+t.message),i.init(t.message,e.origin,e.source)}}))},t.postMessage=function(e,t){return i.postMessage(e,t)}},function(e,t,s){function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function r(){var e=arguments,s=this.useColors;if(e[0]=(s?"%c":"")+this.namespace+(s?" %c":" ")+e[0]+(s?"%c ":" ")+"+"+t.humanize(this.diff),!s)return e;var n="color: "+this.color;e=[e[0],n,"color: inherit"].concat(Array.prototype.slice.call(e,1));var r=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))}),e.splice(o,0,n),e}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(s){}}function a(){var e;try{e=t.storage.debug}catch(s){}return e}function c(){try{return window.localStorage}catch(e){}}t=e.exports=s(2),t.log=o,t.formatArgs=r,t.save=i,t.load=a,t.useColors=n,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){return JSON.stringify(e)},t.enable(a())},function(e,t,s){function n(){return t.colors[l++%t.colors.length]}function r(e){function s(){}function r(){var e=r,s=+new Date,o=s-(u||s);e.diff=o,e.prev=u,e.curr=s,u=s,null==e.useColors&&(e.useColors=t.useColors()),null==e.color&&e.useColors&&(e.color=n());var i=Array.prototype.slice.call(arguments);i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&(i=["%o"].concat(i));var a=0;i[0]=i[0].replace(/%([a-z%])/g,function(s,n){if("%%"===s)return s;a++;var r=t.formatters[n];if("function"==typeof r){var o=i[a];s=r.call(e,o),i.splice(a,1),a--}return s}),"function"==typeof t.formatArgs&&(i=t.formatArgs.apply(e,i));var c=r.log||t.log||console.log.bind(console);c.apply(e,i)}s.enabled=!1,r.enabled=!0;var o=t.enabled(e)?r:s;return o.namespace=e,o}function o(e){t.save(e);for(var s=(e||"").split(/[\s,]+/),n=s.length,r=0;n>r;r++)s[r]&&(e=s[r].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))}function i(){t.enable("")}function a(e){var s,n;for(s=0,n=t.skips.length;n>s;s++)if(t.skips[s].test(e))return!1;for(s=0,n=t.names.length;n>s;s++)if(t.names[s].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=r,t.coerce=c,t.disable=i,t.enable=o,t.enabled=a,t.humanize=s(3),t.names=[],t.skips=[],t.formatters={};var u,l=0},function(e,t){function s(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var s=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return s*l;case"days":case"day":case"d":return s*u;case"hours":case"hour":case"hrs":case"hr":case"h":return s*c;case"minutes":case"minute":case"mins":case"min":case"m":return s*a;case"seconds":case"second":case"secs":case"sec":case"s":return s*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s}}}}function n(e){return e>=u?Math.round(e/u)+"d":e>=c?Math.round(e/c)+"h":e>=a?Math.round(e/a)+"m":e>=i?Math.round(e/i)+"s":e+"ms"}function r(e){return o(e,u,"day")||o(e,c,"hour")||o(e,a,"minute")||o(e,i,"second")||e+" ms"}function o(e,t,s){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+s:Math.ceil(e/t)+" "+s+"s"}var i=1e3,a=60*i,c=60*a,u=24*c,l=365.25*u;e.exports=function(e,t){return t=t||{},"string"==typeof e?s(e):t["long"]?r(e):n(e)}},function(e,t,s){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),o=s(5),i=s(1)("MessageHandler"),a=0,c=new Map,u=function(){function e(){n(this,e),this.ready=!1,this.windowID=null,this.messageOrigin=null,this.messageSource=null,this.pendingMessages=[]}return r(e,[{key:"init",value:function(e,t,s){this.ready=!0,this.windowID=e,this.messageOrigin=t,this.messageSource=s,this.messageSource.postMessage({type:"admin.connect",windowID:e},this.messageOrigin),this.postPendingMessages()}},{key:"postMessage",value:function(e,t){var s=++a,n={type:e,message:t,messageID:s,windowID:this.windowID},r=new o(s,n);return this.ready?(i("post message",e,t),this.messageSource.postMessage(n,this.messageOrigin),c.set(s,r)):this.pendingMessages.push(r),r}},{key:"postPendingMessages",value:function(){var e=!0,t=!1,s=void 0;try{for(var n,r=this.pendingMessages[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var o=n.value;o.data.windowID=this.windowID,this.messageSource.postMessage(o.data,this.messageOrigin),c.set(o.id,o)}}catch(i){t=!0,s=i}finally{try{!e&&r["return"]&&r["return"]()}finally{if(t)throw s}}}}],[{key:"handleMessage",value:function(e){if(!c.has(e.messageID))return i("message not found");var t=c.get(e.messageID);e.status?"error"===e.status?(t._reject(e),c["delete"](e.messageID)):"success"===e.status?(t._resolve(e),c["delete"](e.messageID)):t.emit(e.status,e):(t._resolve(e),c["delete"](e.messageID))}}]),e}();e.exports=u},function(e,t,s){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(e,t,s){for(var n=!0;n;){var r=e,o=t,i=s;a=u=c=void 0,n=!1,null===r&&(r=Function.prototype);var a=Object.getOwnPropertyDescriptor(r,o);if(void 0!==a){if("value"in a)return a.value;var c=a.get;return void 0===c?void 0:c.call(i)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;e=u,t=o,s=i,n=!0}},i=s(6).EventEmitter,a=function(e){function t(e,s){var r=this;n(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.id=e,this.data=s;var i=new Promise(function(e,t){r._resolve=e,r._reject=t});this.then=function(e,t){return i.then(e,t)}}return r(t,e),t}(i);e.exports=a},function(e,t){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},s.prototype.emit=function(e){var t,s,r,a,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(s=this._events[e],i(s))return!1;if(n(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,a=new Array(r-1),c=1;r>c;c++)a[c-1]=arguments[c];s.apply(this,a)}else if(o(s)){for(r=arguments.length,a=new Array(r-1),c=1;r>c;c++)a[c-1]=arguments[c];for(u=s.slice(),r=u.length,c=0;r>c;c++)u[c].apply(this,a)}return!0},s.prototype.addListener=function(e,t){var r;if(!n(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var r;r=i(this._maxListeners)?s.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(e,t){function s(){this.removeListener(e,s),r||(r=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var r=!1;return s.listener=t,this.on(e,s),this},s.prototype.removeListener=function(e,t){var s,r,i,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=this._events[e],i=s.length,r=-1,s===t||n(s.listener)&&s.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(s)){for(a=i;a-->0;)if(s[a]===t||s[a].listener&&s[a].listener===t){r=a;break}if(0>r)return this;1===s.length?(s.length=0,delete this._events[e]):s.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},s.prototype.removeAllListeners=function(e){var t,s;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s=this._events[e],n(s))this.removeListener(e,s);else for(;s.length;)this.removeListener(e,s[s.length-1]);return delete this._events[e],this},s.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},s.listenerCount=function(e,t){var s;return s=e._events&&e._events[t]?n(e._events[t])?1:e._events[t].length:0}}])});
//# sourceMappingURL=webview.min.js.map